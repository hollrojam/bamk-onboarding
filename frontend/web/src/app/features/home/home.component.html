<section class="grid-2">
  <div class="card">
    <h2 class="section-title">Crear cliente</h2>
    <app-customer-form (submitCustomer)="onCreateCustomer($event)" />
  </div>

  <div class="card">
    <div class="list-header">
      <h2 class="section-title">Lista de clientes</h2>
      <button class="btn-secondary" type="button" (click)="onRefreshCustomers()">Actualizar</button>
    </div>
    <app-customer-list
      [customers]="customers()"
      [loading]="customersLoading()"
      (selectCustomer)="onSelectCustomer($event)"
    />
  </div>
</section>

<section class="card accounts-section">
  <div class="accounts-header">
    <h2 class="section-title">GestiÃ³n de cuentas</h2>
    @if (lastCustomerId()) {
      <span class="badge">Cliente: {{ lastCustomerId() }}</span>
    }
  </div>
  <app-account-form
    [customerId]="selectedCustomerId()"
    (submitAccount)="onCreateAccount($event)"
    (loadAccounts)="onLoadAccounts($event)"
  />
  <app-account-list
    [accounts]="accounts()"
    [loading]="accountsLoading()"
    [customerName]="selectedCustomerName()"
    [updatingAccountNumbers]="updatingAccountNumbers()"
    (changeStatus)="onChangeAccountStatus($event)"
  />
</section>

@if (message()) {
  <div class="card message">
    {{ message() }}
  </div>
}
